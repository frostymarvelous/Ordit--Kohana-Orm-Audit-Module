{"name":"Ordit","tagline":"A Kohana 3.x module that adds automatic auditing to the Official ORM module.","body":"# Ordit\r\n\r\nOrdit is a Kohana 3.x module that adds automatic auditing to the Official ORM module.\r\n\r\nOrdit is a transparent extension that audits all CUD actions on your objects.\r\nIt includes  a Log Viewer to view all Audit logs.\r\n\r\n## Getting started\r\n\r\nBefore we use Ordit, we must enable the modules required\r\n\r\n\tKohana::modules(array(\r\n\t\t...\r\n\t\t'database' => MODPATH.'database',\r\n\t\t'orm' => MODPATH.'orm',\r\n\t\t'ordit' => MODPATH.'ordit',\r\n\t\t...\r\n\t));\r\n\r\n[!!] Ordit requires the ORM module (plus its dependencies) to work.\r\n\r\n### Setting up the database\r\n\r\nYou need to create a table in your database to hold all your logs.\r\n\r\nA script is included in the module named `ordit_logs.sql`\r\nThe script is for a mysql database running the InnoDB engine.\r\n\r\nThe table is configured as follows:\r\n\r\n\tTable Name :: \r\n\t\t`ordit_logs`\r\n\tColumns ::\r\n\t\t`id` INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY\r\n\t\t`model` CHAR(50) NOT NULL,\r\n\t\t`action` CHAR(7) NOT NULL,\r\n\t\t`values` TEXT NOT NULL,\r\n\t\t`user` CHAR(50) NOT NULL,\r\n\t\t`timestamp_created` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\r\n\t\r\n### Overriding the Ordit::get_username Method\r\n\r\nIn order to provide the current logged in user's username for auditing,\r\ncreate a class in your classes folder named `Ordit` that extends the `Model_Ordit` class. \r\nThen override the `get_username` method to return the current logged in user's username. The example below uses\r\nthe default `Auth` module.\r\n\r\n\tclass Ordit extends Model_Ordit\r\n\t{\t\r\n\t\tprotected function get_username()\r\n\t\t{\r\n\t\t\treturn Auth::instance()->get_user()->username;\r\n\t\t}\r\n\t}\r\n\r\n### Auditing Your Models\r\n\r\nTo enable auditing of your ORM models, you simple extend `Ordit`.\r\n\r\n\tclass Model_Model extends Ordit\r\n\t{\r\n\t\t...\r\n\t}\r\n\r\nAny CREATE, UPDATE and DELETE actions are automatically and transparently logged.\r\nYou don't have to do anything else.\r\n\r\n### Viewing Your Logs\r\nThe module includes a log viewer. \r\n\r\nYou can view logs at (http://site_root/ordit)\r\n\r\n[!!]The log viewer was modified from [Kohana Log Viewer](https://github.com/ajaxray/Kohana-Log-Viewer) viewer.\r\n\r\n\r\n## TODO\r\n\r\n### Log Changes to Related Modules\r\nCurrently, changes to related modules are logged as an empty array.\r\n\r\n##Improve Viewer\r\n\r\nAdd pagination to the log results\r\n\r\nAdd ability to search by currently `undefined parameters`\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}